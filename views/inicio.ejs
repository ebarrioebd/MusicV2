<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mi MÃºsica | Reproductor</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <link rel="stylesheet" href="/stylesheets/w_config.css">
  <link rel="stylesheet" href="/stylesheets/css_reproductor.css">
  <style>
    #canvas {
      width: 80%;
      height: 10vh;
    }
  </style>
</head>

<body>
  <%- include('partials/nav'); %>
    <header>Mi MÃºsica</header>
    <div class="container">
      <div class="player">
        <div class="audio-player">
          <audio id="audio"
            src="https://dl.dropboxusercontent.com/scl/fi/78xrq0kiwxqa8ditjovqw/I-DON-T-WANT-TO-SET-THE-WORLD-ON-FIRE-THE-INK-SPOTS-SUBTITULADA.mp3?rlkey=dx2mueyy3ek6mhgkvtaz1j6a9&st=v8zckuf1"
            crossorigin="anonymous">

          </audio>
          <div class="player-controls">
            
            <div style="display: grid;justify-content: center ;"> 
            <canvas style="width: 90%;" id="canvas"></canvas>
            </div>
            <marquee class="titulo-track" id="titulo-track">Selecciona una canciÃ³n</marquee>
            <div class="progress-container">
              <span class="time" id="currentTime">0:00</span>
              <div class="progress-bar" id="progressBar">
                <div class="progress" id="progress"></div>
              </div>
              <span class="time" id="duration">0:00</span>
            </div>

            <div class="controls-audio">
              <button class="btn-icon" id="prev">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M18 6l-8.5 6L18 18V6zm-9.5 12V6H6v12h2.5z" />
                </svg>
              </button>
              <button style="-webkit-text-stroke: thick;" class="play-btn" id="playPause">â–¶</button>
              <button class="btn-icon" id="next">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M6 18l8.5-6L6 6v12zm9.5-12v12H18V6h-2.5z" />
                </svg>
              </button>
            </div> 
            <div class="volume-control">
              <button class="volume-btn" id="volumeBtn">ðŸ”Š</button>
              <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="1">
            </div>
            <div>
              <div class="nav-div" onclick="mostrarLista()"><img src="/images/album.png" height="30" width="30"></div>
            </div>
          </div>
        </div>
         
      </div>
    </div>

    

    <div id="lista-musica" class="ocultarIni lista-inicio">
      <div style="height: min-content;display: grid;align-items: center;justify-items: end;margin: 7px;">
        <img onclick="mostrarLista()" src="/images/cancelar.png" height="30" width="30">
      </div>
      <div style="display: flex; align-items: center; margin-left:5px ;justify-content: center;"
        onclick="mostrarLista()">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="8" width="3" height="12" rx="1.5" fill="currentColor" />
            <rect x="9.5" y="4" width="3" height="16" rx="1.5" fill="currentColor" />
            <rect x="16" y="10" width="3" height="10" rx="1.5" fill="currentColor" />
          </svg>
        </div>
        <h2>Lista de reproducciÃ³n</h2>
      </div>
      <div id="listMusic" style="height: inherit; overflow-y: scroll;" class="">
        <% musics.forEach(function(item) { %>
          <div class="track-list" id="tracks" style="display: flex; align-items: center;margin: 10px;">
            <img src="/images/icon-music.png" height="30" width="30">
            <div class="track" data-src="<%= item.url %>">
              <%= item.nombre %>
            </div>
          </div>
          <% }); %>
      </div>
    </div>

    <div class="divCanvasFrecuency">
    </div>

    <%- include('partials/config.ejs'); -%>
      <script>
        localStorage.setItem("imagen_fondo", "<%= imagen_fondo %>");
        localStorage.setItem("blur", "<%= blur %>");

        let isShowListMusic = false;
        const listaInicio = document.getElementById("lista-musica");
        function mostrarLista() {

          listaInicio.classList.remove("ocultarIni");
          if (isShowListMusic) {
            console.log(isShowListMusic)
            listaInicio.classList.remove("mostrarList");
            listaInicio.classList.add("ocultarConfig");
          } else {
            console.log(isShowListMusic)
            listaInicio.classList.add("mostrarList");
            listaInicio.classList.remove("ocultarConfig");
          }
          isShowListMusic = !isShowListMusic;
        }
        function mostrarLista0() {
          document.getElementById("listMusic").classList.toggle("ocultarList");
        }
      </script>
      <script src="/javascripts/js_windows_float.js"></script>
      <script src="/javascripts/class_js_repr.js"></script>

</body>

</html>